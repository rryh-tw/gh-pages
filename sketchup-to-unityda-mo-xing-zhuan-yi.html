<!DOCTYPE html><html lang="zh-tw"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SketchUp to Unity大模型轉移 - Rémi的部落格</title><meta name="description" content="這次做了一個專案，需要將模型師在SketchUp做的模型轉到Unity。 參考了網路上的影片，只需要將SketchUp的檔案export成.fbx for Unity的檔案類型就行了。 實際操作遇到一個很大的問題，導入Unity的模型當到無法操作。&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://rryh-tw.github.io/gh-pages/sketchup-to-unityda-mo-xing-zhuan-yi.html"><link rel="alternate" type="application/atom+xml" href="https://rryh-tw.github.io/gh-pages/feed.xml"><link rel="alternate" type="application/json" href="https://rryh-tw.github.io/gh-pages/feed.json"><meta property="og:title" content="SketchUp to Unity大模型轉移"><meta property="og:site_name" content="Rémi的部落格"><meta property="og:description" content="這次做了一個專案，需要將模型師在SketchUp做的模型轉到Unity。 參考了網路上的影片，只需要將SketchUp的檔案export成.fbx for Unity的檔案類型就行了。 實際操作遇到一個很大的問題，導入Unity的模型當到無法操作。&hellip;"><meta property="og:url" content="https://rryh-tw.github.io/gh-pages/sketchup-to-unityda-mo-xing-zhuan-yi.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://rryh-tw.github.io/gh-pages/assets/css/style.css?v=328ae2eeae5a494e3e72f5dcfeb4d465"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://rryh-tw.github.io/gh-pages/sketchup-to-unityda-mo-xing-zhuan-yi.html"},"headline":"SketchUp to Unity大模型轉移","datePublished":"2023-09-23T18:49","dateModified":"2024-02-22T02:06","description":"這次做了一個專案，需要將模型師在SketchUp做的模型轉到Unity。 參考了網路上的影片，只需要將SketchUp的檔案export成.fbx for Unity的檔案類型就行了。 實際操作遇到一個很大的問題，導入Unity的模型當到無法操作。&hellip;","author":{"@type":"Person","name":"Rémi","url":"https://rryh-tw.github.io/gh-pages/authors/remi/"},"publisher":{"@type":"Organization","name":"Rémi"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://rryh-tw.github.io/gh-pages/">Rémi的部落格</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://rryh-tw.github.io/gh-pages/tags/" target="_self">Tags</a></li><li><a href="https://rryh-tw.github.io/gh-pages/guan-yu-wo.html" target="_self">About</a></li></ul></nav></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2023-09-23T18:49">九月 23, 2023</time></div><h1>SketchUp to Unity大模型轉移</h1></div></header></div><div class="wrapper post__entry"><p>這次做了一個專案，需要將模型師在SketchUp做的模型轉到Unity。</p><p>參考了網路上的影片，只需要將SketchUp的檔案export成.fbx for Unity的檔案類型就行了。</p><p>實際操作遇到一個很大的問題，導入Unity的模型當到無法操作。</p><p>一開始以為是筆電效能太差，但換成桌機後，效果還是非常差勁。進一步研究後，發現是因為直接導入會把每個小零件的mesh分別讀進來，導致有上萬個mesh，Unity每幀要處理這麼多物件會炸掉。</p><p>因此就到了本次問題處理的核心：如何將這些mesh合成一個，同時保留Texture和Material。也就是說把上萬個零件組成一個，讓Unity不會炸掉，反正這些場景不會有物件重組的需求。</p><h4>方法一（失敗）：</h4><p>搜尋關鍵字是「SketchUp Blender Unity」，會顯示這個</p><p><a href="https://youtu.be/kQAjpnToj5s?si=Iftw4L4T62lHZo8K" target="null">Optimize Sketchup Files for Unreal Engine or Unity 3D using Blender</a></p><p>做法大致上是將SketchUp導入Blender，把所有Texture壓成2D圖，再把Mesh和Texture圖丟到Unity。</p><p>SketchUp導入Blender不難，試了很多種檔案種類，fbx, dae, obj看起來是很好的選擇。</p><ul><li>fbx可能會有問題，inport到Blender會顯示"ASCII FBX files are not supported"，要轉檔之類的。</li><li>dae檔是最不失真的轉法，所有點線面都會完整被轉過來。</li><li>obj轉過來則是完整一個object。</li></ul><p>在壓Texture遇到了比較大的困難，首先要先把整個建築物的表皮投影到一個2D圖上，這個步驟叫做UV mapping，作法和影片上的大同小異。接著要把Texture印到mapping對應到的地方，這個步驟叫做Bake。</p><p>影片的方法行不通，最後找了很多相關影片才摸熟他的手法，假設最終的成果圖是Bake.png，要在shader editer(應該就是Unity Texture的意思)的每一個Texture加上一個Node如下圖，並且還要選起來：</p><figure class="post__image post__image--center"><img loading="lazy" src="https://rryh-tw.github.io/gh-pages/media/posts/6/Jie-Tu-2024-02-22-Ling-Chen-1.59.39.png" alt="" width="626" height="442" sizes="100vw" srcset="https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-1.59.39-xs.png 300w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-1.59.39-sm.png 480w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-1.59.39-md.png 768w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-1.59.39-lg.png 1024w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-1.59.39-xl.png 1360w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-1.59.39-2xl.png 1600w"></figure><p class="align-left"><span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">這個Project總共有214個Material，最後想到使用自動點擊器幫我完成這個步驟，也花了好一段時間。</span></p><figure class="post__image post__image--center"><img loading="lazy" src="https://rryh-tw.github.io/gh-pages/media/posts/6/Jie-Tu-2024-02-22-Ling-Chen-2.00.41.png" alt="" width="230" height="606" sizes="100vw" srcset="https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-2.00.41-xs.png 300w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-2.00.41-sm.png 480w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-2.00.41-md.png 768w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-2.00.41-lg.png 1024w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-2.00.41-xl.png 1360w, https://rryh-tw.github.io/gh-pages/media/posts/6/responsive/Jie-Tu-2024-02-22-Ling-Chen-2.00.41-2xl.png 1600w"></figure><p>接著要在Render的Render Engine改成Cycle，Bake Type改成Diffuse，開始Bake就能得到一張Texture 2D圖。</p><p class="align-left">雖然最後有Bake成功，但不知道是不是因為模型太大，UV mapping到一張圖全擠在一起，拉到Unity裡Texture貼上去效果很差，建築物全變為七彩的樣子，最後搞了整整兩天以失敗告終。</p><h4>方法二（失敗）：</h4><p><a href="https://youtube.com/shorts/ufAjkzQ3v9U?si=gvT8THXQo6xUSCBE" target="_blank" rel="noopener noreferrer">Merging many objects into one object in Unity</a></p><p>這次換找看看能不能在Unity直接Merge大量的Mesh，還真的有。</p><p>這個方法是使用Unity的Package probuilder，最後不知道是不是因為Mesh太大量，或是有很多層的Group，也是不成功。</p><h4>方法三（成功）：</h4><p>最後又換了一個想法，假設我成功的將SketchUp轉換到Blender了，那我只要學會把Blender的東西轉到Unity就好了。</p><p><a href="https://youtu.be/5UZ-niuRWz8?si=5H3DnuzVh-GG-KeM" target="_blank" rel="noopener noreferrer">How To Export From Blender to Unity 2020</a></p><p>結果方法超簡單，只要將SketchUp輸出成obj，用Blender匯入，再直接從Blender匯出fbx，把這個fbx和第一次從SketchUp輸出的Texture資料夾一起丟到Unity就行了。</p><p>成功的關鍵在於在前面試的過程中有注意到，這樣import到Blender會自動變成一個大Mesh。一開始沒有這樣想是因為覺得一個Mesh就必須對應到一個Texture，看了這個影片後發現不用耶。</p><p>不過轉移的過程中仍然有一些Texture會跑掉，感覺要在Blender那邊自己調整，這部分就不再繼續研究了。</p><p>特別感謝幫助我的各路朋友。</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on 二月 22, 2024</p><div class="post__share"></div><div class="post__bio bio"><div><h3 class="bio__name"><a href="https://rryh-tw.github.io/gh-pages/authors/remi/" rel="author">Rémi</a></h3></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://rryh-tw.github.io/gh-pages/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://rryh-tw.github.io/gh-pages/zi-gong-yin-le-hui-xin-de-wen.html" class="post__nav-link" rel="prev"><span>Previous</span> 資工音樂會心得文</a></div><div class="post__nav-next"><a href="https://rryh-tw.github.io/gh-pages/tai-bei-li-fa.html" class="post__nav-link" rel="next"><span>Next</span> 台北理髮 </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://rryh-tw.github.io/gh-pages/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav></main><footer class="footer"><div class="footer__copyright"><p>Rémi的部落格</p></div><button onclick="backToTopFunction()" id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://rryh-tw.github.io/gh-pages/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script defer="defer" src="https://rryh-tw.github.io/gh-pages/assets/js/scripts.min.js?v=f47c11534595205f20935f0db2a62a85"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>